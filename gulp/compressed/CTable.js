function CTable(){"use strict";return this instanceof CTable?(Controller.call(this),this.setModel(Table),this.parentWidth=function(t){var e,n=t.getSelection().getStartElement(),i=new Unit(n.getComputedStyle("width")||NEWSLETTER.width()),o=new Unit(n.getComputedStyle("border-width-left")||0),r=new Unit(n.getComputedStyle("border-width-right")||0),a=new Unit(n.getComputedStyle("padding-left")||0),l=new Unit(n.getComputedStyle("padding-right")||0);return e=i.sub(o).sub(r).sub(a).sub(l),e.value=Math.round(e.value),e},this.create=function(t,e){var n=this.getDialogData(t,["text","checkbox"]),i=function(t,e){return(t+1).toString()+" : "+(e+1).toString()};n.width=this.parentWidth(e);var o=new Table;try{o.loadFromTemplate(this.dialogToTemplate(n),i)}catch(r){console.log(r)}return o.toNode()},this.getTable=function(t){var e=this.findParentTable(t);if(e){var n=NEWSLETTER.factory,i=n.mimic(e);if(i)return i.disentangle(),i}},this.addColWeightFields=function(t,e){if(t&&t.nodeType&&Number.isInteger(e)&&!(0>e)){var n,i;for(i=0;e>i;i++)n=document.createElement("input"),n.setAttribute("style","min-width: 3em; width: 5em; text-align: center; margin: 0.2em"),n.setAttribute("class","cke_dialog_ui_input_text"),t.appendChild(n)}},this.setColorField=function(t,e,n,i){if(i){var o=t.getContentElement(e,n);o&&(o.setValue(i),o.getInputElement().setStyle("background-color",i))}},this.findParentTable=function(t){var e=t.getSelection().getStartElement(),n=function(t){return"table"===t.tagName.toLowerCase()&&t.getAttribute(NEWSLETTER["marker-name"])===(new Table).getName()};return e?this.findAscendant(e.$,n):void 0},this.update=function(t,e,n){var i=new Table,o=this.getDialogData(t),r=NEWSLETTER.factory,a=r.mimic(n),l=a.getWidth()||NEWSLETTER.width();return a.disentangle(),o.width=new Unit(l),i=a.update(this.dialogToTemplate(o)),i.toNode()},this.insertColumn=function(t,e,n){var i=this.getEditorAdapter(),o=i.getEditorContent(t),r=this.getWorker();r.insertColumn(e,n),i.setEditorContent(t,o)},this.insertRow=function(t,e){console.log("insertRow: ",t,e)},this.dropRow=function(t){console.log("dropRow: ",t)},this.removeTable=function(t){var e,n,i,o;try{e=this.getEditorAdapter(),n=e.getEditorContent(t),o=e.getNativeRanges(t),i=this.getWorker(),i.clearRangesFromTables(o),e.setEditorContent(t,n)}catch(r){console.log(r.name+" occurred when removing tables: "+r.message)}},void(this.onOk=function(t,e,n){var i,o,r,a,l,s,d,g,c;try{i=this.getEditorAdapter(),o=i.getEditorContent(e),r=i.getDialogData(t,["text","checkbox"]),a=i.dialogToTemplate(r,"table"),s=this.getWorker(),n?s.updateNode(n,a):(g=i.getCursorPosition(e),c=g.startContainer,a.root.width=s.getAvailableWidth(c)||NEWSLETTER.defaultWidth,d=s.getFactory(),l=d.createFromTemplate(a),s.insertAt(c,l.toNode(),g.startOffset)),i.setEditorContent(e,o)}catch(u){console.log(u.name+" occurred when elaborating table plugin confirm action: "+u.message)}})):new CTable}CTable.prototype=Object.create(Controller.prototype);