function Link(t){"use strict";return this instanceof Link?(Tag.call(this),this.setTag("a"),this.setName("Link"),this.setProperties(new LinkProperties),this.getHref=function(){return this.getProperty("href")},this.setHref=function(t){this.setProperty("href",encodeURI(t))},t&&"string"==typeof t&&this.setHref(t),this.underline=function(t){t===!0||void 0===t?this.setStyleProperty("text-decoration","underline"):t===!1?this.setStyleProperty("text-decoration","none"):"string"==typeof t&&this.setStyleProperty("text-decoration",t)},this.dropUnderline=function(){this.setStyleProperty("text-decoration","none")},this.apply=function(t){return t instanceof Link?this.updateLink(t):t instanceof Content?this.applyContent(t):t instanceof Tag?this.applyTag(t):this.wrap(t)},this.wrap=function(t){var e=new Link,n="function"==typeof t.clone?t.clone():t;return e.setProperties(this.getProperties().clone()),e.setStyles(this.getStyles().clone()),e.setElements([n]),e},this.applyTag=function(t){if(t instanceof Tag){var e,n,i;return t.getContent().isEmpty()?e=this.wrap(t):(e=t.clone(),n=e.getContent(),i=this.applyContent(n),e.setContent(i)),e}},this.applyContent=function(t){if(t instanceof Content){var e,n,i,r,s=new Content,o=t.getElements(),p=o.length;for(e=0;p>e;e++)n=o[e],r=this.clone(),i=r.apply(n),s.appendElem(i);return s}},this.updateLink=function(t){if(t instanceof Link){var e=new Link,n=this.getHref();return e.setElements(t.getElements()),e.setProperties(this.getProperties()),e.setStyles(this.getStyles()),e.appendStyle(t.getStyles()),e.appendProperties(t.getProperties()),e.setHref(n),e}},this.isUnderlined=function(){return"underline"===this.getStyleProperty("text-decoration")},this.template=function(){var t={name:"link",root:{href:this.getHref(),color:this.getStyleProperty("color"),isUnderlined:this.isUnderlined(),isTargetBlank:this.shouldOpenNew(),content:this.getContent().toText(),title:this.getProperty("title")}};return t},void(this.shouldOpenNew=function(){return"_blank"===this.getProperty("target")})):new Link(t)}Link.prototype=Object.create(Tag.prototype),Link.parseUri=function(t){if("string"!=typeof t||""===t)return{};var e=t.match(/^((\w+):(\/\/)?)?(.+?)(\/?)$/),n={};return e?(n.protocol=e[2]||"http",e[4]&&(n.href=e[4]),n):n},Link.prototype.characteristicFunction=function(t){return t instanceof Element&&"a"===t.tagName.toLowerCase()};