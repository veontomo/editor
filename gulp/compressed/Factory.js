function Factory(e){"use strict";if(!(this instanceof Factory))return new Factory(e);var t=e instanceof Mapper?e:new Mapper;this.getMapping=function(){return t},this.setMapping=function(e){var n=e instanceof Mapper;return n&&(t=e),n};var n,a=[];this.setAvailableClasses=function(e){a=e},this.getAvailableClasses=function(){return a},this.setDefaultClass=function(e){n=e},this.getDefaultClass=function(){return n},this.stub=function(e){var t=this.getMapping();if(t){var n=t.findTargetFor(e);if("function"==typeof n)return new n}return null},this.mimic=function(e){var t=this.stub(e);return t&&"function"==typeof t.loadFromElement&&t.loadFromElement(e),t},this.createByTagName=function(e){console.log(this.getAvailableClasses());var t,n,a=this.getMapping();if(a){try{t=a.findTargetFor(e),console.log(e,t),n=new t}catch(r){return void console.log(r.name+" occurred when creating element by tag name: "+r.message)}return n}},this.findClass=function(e){var t,n,a,r=this.getAvailableClasses();for(t=r.length,n=0;t>n;n++){try{a=e(r[n])}catch(i){console.log(i.name+" occurred when applying the criteria to the class: "+i.message),a=!1}if(a)return r[n]}},this.findClassByName=function(e){if("string"==typeof e){var t=function(t){var n=new t;return"function"==typeof n.getName&&n.getName().toLowerCase()===e.toLowerCase()};return this.findClass(t)}},this.produceInstanceOf=function(e){if("function"==typeof e)try{return new e}catch(t){console.log(t.name+" occurred when producing a class instance: "+t.message)}},this.createFromTemplate=function(e){if("string"!=typeof e.name)return void 0;var t,n=this.findClassByName(e.name);if(n?t=this.produceInstanceOf(n):(t=this.produceInstanceOf(this.getDefaultClass()),t.setTag(e.name)),!t)return void 0;"function"==typeof t.loadTemplate&&t.loadTemplate(e);var a,r,i,s=e.children;if(Array.isArray(s)&&"function"==typeof t.appendElem)for(a=s.length,i=0;a>i;i++)r=this.createFromTemplate(s[i]),r&&t.appendElem(r);return t}}