function CKEditorAdapter(){"use strict";return this instanceof CKEditorAdapter?(EditorAdapter.call(this),this.getEditorContent=function(e){return e instanceof CKEDITOR.editor?e.document.getBody().$:void 0},this.setEditorContent=function(e,t){if(e instanceof CKEDITOR.editor&&t instanceof Node)try{this.cleanLinks(t),e.setData(t.outerHTML)}catch(o){console.log(o.name+" occurred when setting up the editor content: "+o.message)}},this.cleanLinks=function(e){var t,o,r="data-cke-saved-href",n=e.getElementsByTagName("a"),a=n.length;for(o=0;a>o;o++)t=n.item(o),t.hasAttribute(r)&&t.setAttribute(r,t.getAttribute("href"))},this.getEditorRanges=function(e){if(e instanceof CKEDITOR.editor){var t=e.getSelection();if(t)return t.getRanges()}},this.toNativeRange=function(e){if(e instanceof CKEDITOR.dom.range){var t=document.createRange(),o=e.startOffset,r=e.endOffset,n=e.startContainer,a=e.endContainer;try{t.setEnd(a.$,r),t.setStart(n.$,o)}catch(i){console.log("Error ("+i.name+") detected when setting up the range: "+i.message)}finally{return t}}},this.fillInDialog=function(e,t){var o,r,n,a;for(o in t)if(o&&t.hasOwnProperty(o)){r=t[o];for(n in r)if(n&&r.hasOwnProperty(n)&&(a=r[n],void 0!==a))try{e.setValueOf(o,n,a)}catch(i){console.log(i.name+" when filling in the dialog menu item ("+o+", "+n+") with value "+a+": "+i.message)}}},this.templateToDialog=function(e){var t=e.name.toLowerCase(),o=t+"TemplateToDialog",r=this[o];console.log("search for "+t+" template"),"function"!=typeof r&&(r=this.defaultTemplateToDialog);try{return r(e)}catch(n){console.log(n.name+" when transforming a template into dialog data: "+n.message)}},this.defaultTemplateToDialog=function(e){return console.log("default template -> dialog converter is called"),e},this.tableDialogToTemplate=function(e){var t={name:"table",root:{style:{margin:e.table.margin,padding:e.table.padding,"border-width":e.table["border-width"],"border-color":e.table["border-color"],background:e.table.background}},frame:{width:e.rows.frameWidth,color:e.rows.frameColor},rows:e.table.rows,columns:e.table.columns,row:{name:"row",root:{style:{margin:e.rows.margin,padding:e.rows.padding,"border-width":e.rows["border-width"],"border-color":e.rows["border-color"]}},"border-first":e.rows.borderFirst,"border-last":e.rows.borderLast,"border-middle":e.rows.borderMiddle},cell:{name:"cell",root:{style:{margin:e.cells.margin,padding:e.cells.padding}},"border-first":e.cells.borderFirst,"border-last":e.cells.borderLast,"border-middle":e.cells.borderMiddle}};return t},this.tableTemplateToDialog=function(e){console.log("tableTemplateToDialog input:",e);var t={structure:{rows:e.root.rows,cols:e.root.cols},spaces:{margin:e.root.margin,padding:e.root.padding,"border-spacing":e.root["border-spacing"]},borders:{}};return t},this.linkTemplateToDialog=function(e){return{linkInfoTab:e.root}},this.linkDialogToTemplate=function(e){var t,o="linkInfoTab";return t={name:"link",root:{href:e[o].href,target:e[o].isTargetBlank?"_blank":"_self",title:e[o].title,style:{color:e[o].color,"text-decoration":e[o].isUnderlined?"underline":"none"}}}},this.imgDialogToTemplate=function(e){var t="mainTab",o={name:"img",root:{src:e[t].imageUrl,alt:e[t].textAlt,title:e[t].textAlt}};return o},this.defaultDialogToTemplate=function(e){return console.log("default dialog -> template converter is called"),{tab:e.root}},this.imgTemplateToDialog=function(e){var t={mainTab:{imageUrl:e.root.src,textAlt:e.root.alt||e.root.title}};return t},this.dialogToTemplate=function(e,t){var o="string"==typeof t?t.toLowerCase():"default",r=o+"DialogToTemplate",n=this[r];return"function"!=typeof n&&(n=this.defaultDialogToTemplate),n(e)},this.getDialogData=function(e,t){var o,r,n,a,i,l={},s=e._.contents,d=void 0===t||!Array.isArray(t);for(o in s)if(s.hasOwnProperty(o)){r=s[o],a={};for(n in r)if(r.hasOwnProperty(n)&&(d||-1!==t.indexOf(r[n].type)))try{i=e.getValueOf(o,n),void 0!==i&&(a[n]=e.getValueOf(o,n))}catch(c){console.log(c.name+": retrieving dialog element ("+o+", "+n+")")}l[o]=a}return l},this.getCursorPosition=function(e){try{var t=e.getSelection(),o=t.getRanges();return this.toNativeRange(o[0])}catch(r){return void console.log(r.name+": when detecting cursor position ("+r.message+")")}},this.setDialogInputField=function(e,t){var o,r,n;try{o=t.tabId,r=t.elemId,n=t.value,e.setValueOf(o,r,n)}catch(a){console.log(a.name+" when setting dialog input field:"+a.message)}},this.setDialogHtmlField=function(e,t){var o,r,n;try{o=t.tabId,r=t.elemId,n=e.getContentElement(o,r),CKEDITOR.document.getById(n.domId).$.innerHTML=t.value}catch(a){console.log(a.name+" when setting dialog html field:"+a.message)}},this.toNativeElement=function(e){return e instanceof CKEDITOR.dom.element?e.$:void 0},this.saveExtra=function(e,t){e.extraDataToStoreHere=t},this.getExtra=function(e){return e.extraDataToStoreHere},this.disableField=function(e,t){var o;for(o in t)t.hasOwnProperty(o)&&e.getContentElement(o,t[o]).disable()},this.isFieldEnabled=function(e,t){var o,r;try{r=Object.keys(t),o=e.getContentElement(r[0],t[r[0]]).isEnabled()}catch(n){console.log(n.name+" occurred when determining the status of dialog field: "+n.message),console.log("Treat it as if the field is disabled..."),o=!1}return o},void(this.getFieldValue=function(e,t){var o;try{return o=Object.keys(t),e.getValueOf(o[0],t[o[0]])}catch(r){console.log(r.name+" occurred when retrieving value of dialog field: "+r.message)}})):new CKEditorAdapter}CKEditorAdapter.prototype=Object.create(EditorAdapter.prototype);