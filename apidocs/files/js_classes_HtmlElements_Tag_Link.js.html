<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>js\classes\HtmlElements\Tag\Link.js - Newsletter API</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..\logo.png" title="Newsletter API"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.2</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/Attributes.html">Attributes</a></li>
            
                <li><a href="../classes/Cell.html">Cell</a></li>
            
                <li><a href="../classes/CKHelper.html">CKHelper</a></li>
            
                <li><a href="../classes/Content.html">Content</a></li>
            
                <li><a href="../classes/Dom.html">Dom</a></li>
            
                <li><a href="../classes/Factory.html">Factory</a></li>
            
                <li><a href="../classes/Helper.html">Helper</a></li>
            
                <li><a href="../classes/Image.html">Image</a></li>
            
                <li><a href="../classes/ImageStyle.html">ImageStyle</a></li>
            
                <li><a href="../classes/Link.html">Link</a></li>
            
                <li><a href="../classes/LinkAttributes.html">LinkAttributes</a></li>
            
                <li><a href="../classes/LinkStyles.html">LinkStyles</a></li>
            
                <li><a href="../classes/List.html">List</a></li>
            
                <li><a href="../classes/ListItem.html">ListItem</a></li>
            
                <li><a href="../classes/ListItemStyles.html">ListItemStyles</a></li>
            
                <li><a href="../classes/ListStyles.html">ListStyles</a></li>
            
                <li><a href="../classes/Mapping.html">Mapping</a></li>
            
                <li><a href="../classes/OList.html">OList</a></li>
            
                <li><a href="../classes/PlainText.html">PlainText</a></li>
            
                <li><a href="../classes/Properties.html">Properties</a></li>
            
                <li><a href="../classes/Row.html">Row</a></li>
            
                <li><a href="../classes/Selection.html">Selection</a></li>
            
                <li><a href="../classes/StringHelper.html">StringHelper</a></li>
            
                <li><a href="../classes/Styles.html">Styles</a></li>
            
                <li><a href="../classes/Table.html">Table</a></li>
            
                <li><a href="../classes/TableAttributes.html">TableAttributes</a></li>
            
                <li><a href="../classes/TableCellStyles.html">TableCellStyles</a></li>
            
                <li><a href="../classes/TableRowStyles.html">TableRowStyles</a></li>
            
                <li><a href="../classes/TableStyles.html">TableStyles</a></li>
            
                <li><a href="../classes/Tag.html">Tag</a></li>
            
                <li><a href="../classes/UList.html">UList</a></li>
            
                <li><a href="../classes/Unit.html">Unit</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/CKHelper.html">CKHelper</a></li>
            
                <li><a href="../modules/Helper.html">Helper</a></li>
            
                <li><a href="../modules/HtmlElements.html">HtmlElements</a></li>
            
                <li><a href="../modules/Properties.html">Properties</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: js\classes\HtmlElements\Tag\Link.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/*jslint plusplus: true, white: true */
/*global Tag, LinkAttributes, LinkStyles, Content */

/**
* This class is represent an html link tag &quot;a&quot;.
 * @module        HtmlElements
 * @class         Link
 * @constructor
 * @extends       Tag
*/
function Link(href) {
	&quot;use strict&quot;;
	if (!(this instanceof Link)) {
		return new Link(href);
	}
	Tag.call(this);

	/**
	 * Re-set private properties defined in parent class {{#crossLink &quot;Tag&quot;}}Tag{{/crossLink}}:
	 * &lt;ol&gt;&lt;li&gt;
	 * {{#crossLink &quot;Tag/tag:property&quot;}}tag{{/crossLink}} to be &quot;a&quot;
	 * &lt;/li&gt;&lt;li&gt;
	 * {{#crossLink &quot;Tag/className:property&quot;}}className{{/crossLink}} to be &quot;Link&quot;
	 * &lt;/li&gt;&lt;li&gt;
	 * {{#crossLink &quot;Tag/attributes:property&quot;}}attributes{{/crossLink}} to be
	 * {{#crossLink &quot;LinkStyles&quot;}}LinkStyles{{/crossLink}}
	 * &lt;/li&gt;&lt;li&gt;
	 * {{#crossLink &quot;Tag/styles:property&quot;}}styles{{/crossLink}} to be
	 * {{#crossLink &quot;LinkAttributes&quot;}}LinkAttributes{{/crossLink}}
	 * &lt;/li&gt;&lt;/ol&gt;
	 * @method         constructor
	 */
	this.setTag(&#x27;a&#x27;);
	this.setName(&#x27;Link&#x27;);
	this.setAttributes(new LinkAttributes());
	this.setStyles(new LinkStyles());


	/**
	 * Returns value of &quot;href&quot; key of the current object attribute. If it turns out to be an instance of
	 * {{#crossLink &quot;LinkAttributes&quot;}}LinkAttributes{{/crossLink}} class, then calls
	 * {{#crossLink &quot;LinkAttributes/getHref:method&quot;}}getHref(){{/crossLink}} method, otherwise
	 * returns &quot;href&quot; key value of {{#crossLink &quot;Link/attributes:property&quot;}}attributes{{/crossLink}}.
	 * @method    getHref
	 * @return    {String}
	 */
	this.getHref =  function(){
		var attrCopy = this.getAttributes();
		return (typeof attrCopy.getHref === &#x27;function&#x27;) ? attrCopy.getHref() : attrCopy.getProperty(&#x27;href&#x27;);
	};

	/**
	 * Href setter. Calles method {{#crossLink &quot;Attributes/setAttrProperty:method&quot;}}setAttrProperty(&#x27;href&#x27;, ...){{/crossLink}}.
	 * @method   setHref
	 * @param    {String}         url
	 * @return   {void}
	 */
	this.setHref =  function(url){
		this.setAttrProperty(&#x27;href&#x27;, url);
	};


	// set url if it is given
	if(href &amp;&amp; (typeof href === &#x27;string&#x27;)){
		this.setHref(encodeURI(href));
	}


	/**
	 * Sets &#x60;text-attribute&#x60; of the {{#crossLink &quot;Link/style:property&quot;}}&#x60;style&#x60;{{/crossLink}} property.
	 * If the argument is missing or equal to &#x60;true&#x60;, &quot;underline&quot; is imposed.
	 * If the argument is false, then &quot;none&quot; is imposed.
	 * If the argument is a string,  &#x60;text-property&#x60; will be assigned to be equal to that string.
	 * If nothing of the above holds, &#x60;text-property&#x60; remains unchanged.
	 * @method    underline
	 * @param     {String|Null|Boolean}  val
	 * @return    {void}
	 */
	this.underline = function(val){
		if (val === true || val === undefined){
			this.setStyleProperty(&#x27;text-decoration&#x27;, &#x27;underline&#x27;);
		} else if (val === false) {
			this.setStyleProperty(&#x27;text-decoration&#x27;, &#x27;none&#x27;);
		} else if (typeof val === &#x27;string&#x27;){
			this.setStyleProperty(&#x27;text-decoration&#x27;, val);
		}
	};

	/**
	 * Sets &#x60;text-attribute&#x60; of the {{#crossLink &quot;Link/style:property&quot;}}&#x60;style&#x60;{{/crossLink}} property to be &#x60;none&#x60;.
	 * @method    dropUnderline
	 * @return    {void}
	 */
	this.dropUnderline = function(){
		this.setStyleProperty(&#x27;text-decoration&#x27;, &#x27;none&#x27;);
	};

	/**
	 * Apply target properties on the argument &#x60;obj&#x60;. The following cases are distinguished:
	 * &lt;ul&gt;&lt;li&gt;
	 * the argument is an instance of {{#crossLink &quot;Link&quot;}}Link{{/crossLink}}. In this case, returns output of
	 * {{#crossLink &quot;Link/updateLink:method&quot;}}updateLink{{/crossLink}} method.
	 * &lt;/li&gt;&lt;li&gt;
	 * the argument is an instance of {{#crossLink &quot;Content&quot;}}Content{{/crossLink}}. In this case, returns output of
	 * {{#crossLink &quot;Link/applyContent:method&quot;}}applyContent{{/crossLink}} method.
	 * &lt;/li&gt;&lt;li&gt;
	 * the argument is an instance of {{#crossLink &quot;Tag&quot;}}Tag{{/crossLink}}. In this case, returns output of
	 * {{#crossLink &quot;Link/applyTag:method&quot;}}applyTag{{/crossLink}} method.
	 * &lt;/li&gt;&lt;/ul&gt;
	 * If non of the above holds, result of {{#crossLink &quot;Link/wrap:method&quot;}}wrap{{/crossLink}} method is returned.
	 * @method         apply
	 * @param          {Any}                obj
	 * @return         {Any}                type of output depends on input argument
	 */
	this.apply = function(obj){
		if (obj instanceof Link){
			// console.log(obj, &#x27; is a Link&#x27;);
			return this.updateLink(obj);
		}
		if (obj instanceof Content){
			// console.log(obj, &#x27; is a Content&#x27;);
			return this.applyContent(obj);
		}
		if (obj instanceof Tag){
			// console.log(obj, &#x27; is a Tag&#x27;);
			return this.applyTag(obj);
		}
		// console.log(obj, &#x27; is default&#x27;);
		return this.wrap(obj);
	};

	/**
	 * Returns a copy of the target in which {{#crossLink &quot;Tag/content:property&quot;}}content{{/crossLink}}
	 * contains the only element which is &#x60;obj&#x60;.
	 * @method         wrap
	 * @param          {Any}                obj
	 * @return         {Link}
	 */
	this.wrap = function(obj){
		/// strange thing: even though the target is a Link and the output is to be a Link,
		/// if I create object to return by means of this.clone(), somehow Content elements get
		/// overrides when I use them in apply. For this reason, &quot;new Link()&quot; is used to create
		/// the object which will be returned.
		var output = new Link(),
			item = (typeof obj.clone === &#x27;function&#x27;) ? obj.clone() : obj;
		output.setAttributes(this.getAttributes().clone());
		output.setStyles(this.getStyles().clone());
		output.setElements([item]);
		return output;

	};

	/**
	 * Converts the argument in link. Argument &#x60;tagObj&#x60; must be a {{#crossLink &quot;Tag&quot;}}Tag{{/crossLink}} instance.
	 * If its {{#crossLink &quot;Tag/content&quot;}}content{{/crossLink}} is
	 * &lt;ol&gt;&lt;li&gt;
	 * non empty, then it is returned a copy of the argument in which {{#crossLink &quot;Tag/content:property&quot;}}content{{/crossLink}}
	 * is replaced by output of {{#crossLink &quot;Link/applyContent:method&quot;}}applyContent{{/crossLink}} method.
	 * &lt;/li&gt;&lt;li&gt;
	 * empty, then a {{#crossLink &quot;Link&quot;}}Link{{/crossLink}} instance is returned. This instance has
	 * {{#crossLink &quot;Tag/attributes:property&quot;}}attributes{{/crossLink}} and
	 * {{#crossLink &quot;Tag/styles:property&quot;}}styles{{/crossLink}} of the target and its
	 * {{#crossLink &quot;Tag/content:property&quot;}}content{{/crossLink}} contains &#x60;tagObj&#x60; as the only element.
	 * &lt;/li&gt;&lt;li&gt;
	 * &lt;/li&gt;&lt;/ol&gt;
	 * @method         applyTag
	 * @param          {Tag}                tagObj
	 * @return         {Tag|Link}
	 */
	this.applyTag = function(tagObj){
		if (tagObj instanceof Tag){
			var result, cntn, cntnLinkified;
			if (!(tagObj.getContent().isEmpty())){
				result = tagObj.clone();
				cntn = result.getContent();
				cntnLinkified = this.applyContent(cntn);
				result.setContent(cntnLinkified);
			} else {
				result = this.wrap(tagObj);
			}
			return result;
		}
	};

	/**
	 * Modifies a Content instance in such a way that {{#crossLink &quot;Link/apply:method&quot;}}apply{{/crossLink}}
	 * is applied on all elements of the argumet.
	 * @method         applyContent
	 * @param          {Content}            cntn
	 * @return         {Content}
	 */
	this.applyContent = function(cntn){
		if (cntn instanceof Content){
			var result = new Content(),
				cntnElems = cntn.getElements(),
				len = cntnElems.length,
				i, current, linked, newLink;
			for (i = 0; i &lt; len; i++){
				current = cntnElems[i];
				newLink = this.clone();
				linked = newLink.apply(current);
				result.appendElem(linked);
			}
			return result;
		}

	};

	/**
	 * Returns a new Link instance with &#x60;href&#x60; as in the target, {{#crossLink &quot;Tag/content:property&quot;}}content{{/crossLink}}
	 * as in the argument, {{#crossLink &quot;Tag/attributes:property&quot;}}attributes{{/crossLink}} and
	 * {{#crossLink &quot;Tag/styles:property&quot;}}styles{{/crossLink}} are as in the argument but augmented by corresponding values
	 * from the target
	 * @method         updateLink
	 * @param          {Link}               link
	 * @return         {Link}
	 */
	this.updateLink = function(link){
		// console.log(&#x27;updating link &#x27; + this.toHtml());
		if (link instanceof Link){
			var result = new Link(),
				src = this.getHref();
			result.setElements(link.getElements());
			result.setAttributes(this.getAttributes());
			result.setStyles(this.getStyles());
			result.appendStyle(link.getStyles());
			result.appendAttributes(link.getAttributes());
			result.setHref(src);
			// console.log(&#x27;returning &#x27;, result.toHtml());
			return result;
		} else {
			// console.log(&#x27;argument is not a link, so there is nothing to return&#x27;);
		}

	};

}
Link.prototype = Object.create(Tag.prototype);

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
